============================
 Fitplot User Documentation
============================

.. sectnum::
.. contents:: Table of Contents

Requirements
============

Operating System
----------------
Builds are available for Windows 7 (64-bit) and Linux Debian 8 (Jessie - 64 bit).

Input devices
-------------

A mouse or trackpad rather than a touchscreen is recommended in order to pan and scroll the graph generated by the application.  A touchscreen may be used other features.

Browser
-------
Fitplot requires access to the internet and a web browser. 

Browser version
~~~~~~~~~~~~~~~
In theory, any browser capable of supporting a combination of Plot.ly, Material Design Lite components, and Google Maps Javascript API and Google Charts should be capable of using the application.

In general browsers with the following version numbers or later should be compatible (but see the tested configurations section below):

+ Microsoft Internet Explorer 10 or above
+ Mozilla Firefox version 31 or above
+ Google Chrome version 31 or above

Browser settings
~~~~~~~~~~~~~~~~
Javascript and cookies must be enabled to use the application.  This is generally the out-of-the-box setting for most modern browsers.

Tested configurations
---------------------
Fitplot has been tested under the following combinations of operating system and browser:

- Microsoft Windows 7 (64 bit build) 
	+ Internet Explorer 11
	+ Firefox 47.0.1
	+ Chrome 51.0.2704.103
- Debian GNU/Linux 8 (Jessie - 64 bit) 
	+ Chrome 51.0.2704.106
	+ Firefox 45.2.0
- Apple iOS 9 (client only iPad 2)
	+ Safari

Input file formats
------------------
Fitplot will display files generated in either Garmin's FIT or TCX formats.

Installation
============

Installation is a performed simply by copying the files from the delivery medium (CD/flash/web download) into a directory/folder on the user's hard drive.  

The program needs write access to a temporary directory (typically C:\\Users\\User Name\\AppData\\Local\\Temp on MS Windows) or (/tmp on Linux). Nothing else is required.

Usage
=====

Getting the files
-----------------

Instructions for making a Garmin file available on the PC is specific to the individual device:

- Devices using Ant Agent to download files: Forerunner 50, 60, 70, 310XT, 405, 405CX, 410, 610, 910, 910XT, and Garmin Swim

- Devices using a docking cradle to download files: Forerunner/Edge 205 and 305

- Devices using a USB cable to download files: Forerunner/Edge 10, 110, 210, 220, 620, 500, 510, 705, 800, 810, 1000, and 920XT 

Detailed instructions describing the process of moving the file from the watch to the PC for the numerous models Garmin manufactures is beyond the scope of this document but there are a number of descriptions of the process available on the Internet (see the next section for helpful links).  That said, the newer Garmin devices support the USB option which tends to be less problematic than older Ant Agent transfers.

In addition, there are sample FIT and TCX files provided in the distribution under the directory/folder named "samples" that may be loaded to use the application.

Once the files have been transferred to the PC continue to the next step "Start the application".

Download instructions for your device
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

At the time of this writing, owner's manuals for many Garmin devices may be downloaded from here:

	+ https://support.garmin.com/support/manuals/searchManuals.faces?refresh=true
	+ Select Sports & Recreation from the dropdown list
	+ Select Running from the second dropdown list
	+ Select <Your Model> from the third dropdown list

The Garmin learning center has detailed videos as well:

	+ http://www8.garmin.com/learningcenter/


File locations
~~~~~~~~~~~~~~

- ANT+ protocol
	+ On Windows computers, the Application Data (AppData) folders are hidden by default and you must enable the display of hidden files before you are able to see these elements.﻿ Please see: http://windows.microsoft.com/en-us/windows/show-hidden-files#show-hidden-files=windows-7
	+ Windows 2000 and Windows XP: C:\\Documents and Settings\\<USERNAME>\\Application Data\\GARMIN\\Devices\\<DEVICE-ID>
	+ Windows Vista, Windows 7 and Windows 8: C:\\Users\\<USERNAME>\\AppData\\Roaming\\GARMIN\\Devices\\<DEVICE-ID>
	+ Mac OS X: Macintosh HD/Users/<USERNAME>/Library/Application Support/Garmin/Devices/<DEVICE-ID>

﻿
- USB
	+ Connect your Garmin to the USB cable and ensure the cable is plugged into your computer and wait for your computer to recognize the device.  Files may be loaded directly from the watch in this configuration.
	+ <DRIVE>\\Garmin\\Garmin\\Activity\\

Starting the application
------------------------

Fitplot has both a web server and web client.  Both must be loaded in order to use the application.  

Type fitplot from the command line or clicking on the executable file (fitplot.exe - Windows, fitplot - Linux) will start both the client and the server.

If the browser client is closed and the server is left running, the user-interface may be generated by opening any supported browser and typing "http://localhost:8080" (without the quotes) into the address bar.

Using the application
---------------------

Load a file
~~~~~~~~~~~

Once the steps described in "Starting the application" have been performed the user is presented with a circular green target with the figure of a "+".  (On screens with smaller resolutions this may not be visible but the same functionality is available from the "hamburger" menu in the upper left. The application is ready to process and display the user's running data.

Pressing the target will present a file input dialog box. Navigate to one of the folders containing either a .FIT or .TCX format file and confirm.  

Enter user-specific settings
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Next the file will be processed and the results displayed upon selecting one of the tabs (Visualize, Summarize, etc.).  However the first time the application runs it has no knowledge of three items:

- which trends the user wishes to display (pace/elevation/cadence)
- a typical split time/distance for user
- the choice of unit system (metric or imperial)

The user should select the appropriate checkboxes (under Graph) and enter a split time and distance (under Analysis) to complete the process.

After the inital run, these preferences and information will be retained as defaults but can be changed as necessary.

Interactive features
~~~~~~~~~~~~~~~~~~~~

After the user-specific settings have been entered, the user may interact with several of the tools contained with the results.  The application has been designed with tooltips to describe most of the tools but there are several features worthy of further description:

- Laps/Splits
	+ Clicking the headers sorts based on that field (distance, pace, etc.)
- Graph
	+ Hovering over the graph displays the Modebar containing a series of icons.
	+ Zooming may be accomplished via click and drag on the graph or via the modebar.
	+ Double clicking the graph returns to the maximum zoom.  There is also a modebar icon to do the same.
	+ Panning may be accomplished via holding shift while clicking the mouse and dragging.
	+ Hovering over the graph will display pop-ups containing the data values.  The map marker will track the position of the runner at a given distance.
- Map
	+ Dragging and dropping the yellow figure on the map will bring up a street view of the position.
	+ Satellite and map views may be toggled by the targets in the upper left.
	+ Click and drag pans across the map independently of the current marker position.
	+ https://support.google.com/maps/answer/144349?hl=e
- Analysis
	+ The user's personal split times is used to calculate VO2max values. Entering new values for the time distance will update the VO2max calculation and the %VO2 gauge.

In addition, transient popup notifications will be displayed at the bottom of the screen when new files are loaded or error messages occur.

Interpreting Results
~~~~~~~~~~~~~~~~~~~~
Most of the returned results are labeled to aid in easy interpretation.  However the values for VO2max and VDOT may be unfamiliar to the user.  Wikipedia has a good description for 

+ https://en.wikipedia.org/wiki/VO2_max
+ https://en.wikipedia.org/wiki/Jack_Daniels_(coach)#VDOT

Fitplot uses the user's split result as a surrogate for the tests described in the VO2max link.  VDOT is calculated by pace of the user's currently loaded run.  The %VO2 is an indication of the intensity of a run. In the absence of a heart rate measuring device, the %VO2max number can serve to identify if a given run was too fast or slow for a particular training objective (easy run, marathon pace, threshold, interval, or repetition).

The user's VO2max can also be compared to the general population (by age) using the provided table as a means to estimate cardiovascular fitness.

Normative data for VO2max

Female (values in ml/kg/min)

=====   =========   ===========     ===========    ============     ===========     ========
Age     Very Poor       Poor           Fair            Good         Excellent       Superior
-----   ---------   -----------     -----------    ------------     -----------     --------
13-19    <25.0      25.0 - 30.9     31.0 - 34.9     35.0 - 38.9     39.0 - 41.9     >41.9
20-29    <23.6      23.6 - 28.9     29.0 - 32.9     33.0 - 36.9     37.0 - 41.0     >41.0
30-39    <22.8      22.8 - 26.9     27.0 - 31.4     31.5 - 35.6     35.7 - 40.0     >40.0
40-49    <21.0      21.0 - 24.4     24.5 - 28.9     29.0 - 32.8     32.9 - 36.9     >36.9
50-59    <20.2      20.2 - 22.7     22.8 - 26.9     27.0 - 31.4     31.5 - 35.7     >35.7
60+      <17.5      17.5 - 20.1     20.2 - 24.4     24.5 - 30.2     30.3 - 31.4     >31.4

=====   =========   ===========     ===========    ============     ===========     ========


Male (values in ml/kg/min)

=====   =========   ===========     ===========    ============     ===========     ========
Age     Very Poor       Poor           Fair            Good         Excellent       Superior
-----   ---------   -----------     -----------    ------------     -----------     --------
13-19    <35.0      35.0 - 38.3     38.4 - 45.1     45.2 - 50.9     51.0 - 55.9     >55.9
20-29    <33.0      33.0 - 36.4     36.5 - 42.4     42.5 - 46.4     46.5 - 52.4     >52.4
30-39    <31.5      31.5 - 35.4     35.5 - 40.9     41.0 - 44.9     45.0 - 49.4     >49.4
40-49    <30.2      30.2 - 33.5     33.6 - 38.9     39.0 - 43.7     43.8 - 48.0     >48.0
50-59    <26.1      26.1 - 30.9     31.0 - 35.7     35.8 - 40.9     41.0 - 45.3     >45.3
60+      <20.5      20.5 - 26.0     26.1 - 32.2     32.3 - 36.4     36.5 - 44.2     >44.2

=====   =========   ===========     ===========    ============     ===========     ========

Table Reference: The Physical Fitness Specialist Certification Manual, The Cooper Institute for Aerobics Research, Dallas TX, revised 1997 printed in Advance Fitness Assessment & Exercise Prescription, 3rd Edition, Vivian H. Heyward, 1998.p48

Troubleshooting
---------------

This section is not complete yet.

Ending the application
----------------------

Ending the application is performed by clicking on the exit target in the drop down (hamburger) menu.  The application will prompt for confirmation and when it's received, signal the server to stop and close the browser window.  If the help window is also open it will have to be closed manually.

Known Issues
============
The run graph does not support panning via a touchscreen only.  Zooming gestures vary by browser and often take several iterations to accomplish.

+ Google Chrome: Zoom by a single tap with two fingers followed by a single tap with one finger.  No feedback will be given after the inital two finger tap.

+ Mozilla Firefox: Zoom by a single finger tap, hold and drag.


License
=======

Portions of the software embedded in this software are governed by the following software licenses:

Plotly, fit

::

	The MIT License (MIT)

	Copyright (c) 2016 Plotly, Inc
	Copyright (c) 2015 Jeremy Summers

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	THE SOFTWARE.

Google Maps Javascript API Standard Plan

::

	https://developers.google.com/maps/pricing-and-plans/#details

Google Charts API

::

	https://developers.google.com/terms/

Material Design Lite

::

	Copyright 2015 Google Inc

	Licensed under the Apache License, Version 2.0 (the "License");
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at

		http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software
	distributed under the License is distributed on an "AS IS" BASIS,
	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	See the License for the specific language governing permissions and
	limitations under the License.

	All code in any directories or sub-directories that end with \*.html or
	\*.css is licensed under the Creative Commons Attribution International
	4.0 License, which full text can be found here:
	https://creativecommons.org/licenses/by/4.0/legalcode.

	As an exception to this license, all html or css that is generated by
	the software at the direction of the user is copyright the user. The
	user has full ownership and control over such content, including
	whether and how they wish to license it.
